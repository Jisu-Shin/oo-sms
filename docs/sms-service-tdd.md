# SMS Service TDD 구현

## 1. **SRS(소프트웨어 요구사항 명세서) 작성**
✅ **완료** - `docs/sms-service-SRS.md` 참조 (실제 코드 기반)

## 2. **SRS를 잘 설명할 수 있는 예시 목록 작성**

### SMS 발송 기능
- **정상적인 SMS 발송**
  - 예시: 고객 리스트[고객ID:1, 전화번호:"01012345678"], 발송일시:"202509061400", 템플릿ID:1
  - 기대 결과: true 반환, SMS 객체들이 생성되어 저장됨

- **빈 고객 리스트로 발송 시도**
  - 예시: 고객 리스트[], 발송일시:"202509061400", 템플릿ID:1
  - 기대 결과: IllegalArgumentException("sms 발송할 고객이 없습니다.")

- **존재하지 않는 템플릿으로 발송 시도**
  - 예시: 고객 리스트[정상], 발송일시:"202509061400", 템플릿ID:999
  - 기대 결과: IllegalArgumentException("해당 SMS 템플릿이 없습니다: 999")

### SMS 목록 조회 기능
- **기간별 SMS 목록 조회**
  - 예시: 시작일시:"202509060900", 종료일시:"202509061800"
  - 기대 결과: 해당 기간에 발송된 SMS 리스트 반환

- **잘못된 날짜 형식으로 조회**
  - 예시: 시작일시:"20250906" (HHmm 누락), 종료일시:"202509061800"
  - 기대 결과: DateTimeParseException 발생

### SMS 템플릿 생성 기능
- **변수가 있는 템플릿 생성**
  - 예시: 템플릿 내용:"안녕하세요 {고객명}님, {상품명} 주문이 완료되었습니다.", SMS유형:"INFORMATIONAL"
  - 기대 결과: 템플릿 생성 후 ID 반환, {고객명}, {상품명} 변수와 관계 설정

- **존재하지 않는 변수를 포함한 템플릿 생성**
  - 예시: 템플릿 내용:"안녕하세요 {존재하지않는변수}님", SMS유형:"INFORMATIONAL"
  - 기대 결과: IllegalArgumentException("해당 템플릿 변수는 없습니다 : 존재하지않는변수")

### SMS 템플릿 수정 기능
- **기존 템플릿 내용 및 변수 관계 수정**
  - 예시: 템플릿ID:1, 새 내용:"수정된 {고객명}님 메시지", SMS유형:"ADVERTISING"
  - 기대 결과: 템플릿 업데이트, 기존 변수 관계 삭제 후 새 관계 생성

### SMS 템플릿 삭제 기능
- **템플릿 및 관련 관계 삭제**
  - 예시: 템플릿ID:1
  - 기대 결과: 템플릿-변수 관계 먼저 삭제, 그 다음 템플릿 삭제

### SMS Factory 기능
- **SMS 객체 리스트 생성**
  - 예시: SMS템플릿, 고객 리스트[2명], 발송 요청 정보
  - 기대 결과: 2개의 SMS 객체 생성, 각각 변수 바인딩 완료, 필터링 결과 설정

## 3. **테스트 케이스 목록 작성**

### SmsService 단위 테스트
- [x] **TC-001**: SMS 발송 성공 테스트
- [x] **TC-002**: 빈 고객 리스트로 발송 시 예외 발생
- [x] **TC-003**: 빈 전화번호로 발송 시 예외 발생  
- [x] **TC-004**: 존재하지 않는 템플릿 ID로 발송 시 예외 발생
- [x] **TC-005**: 기간별 SMS 목록 조회 성공
- [x] **TC-006**: 잘못된 날짜 형식으로 조회 시 예외 발생

### SmsTemplateService 단위 테스트
- [ ] **TC-007**: 템플릿 생성 성공 테스트
- [ ] **TC-008**: 템플릿 생성 시 변수 추출 및 관계 설정 검증
- [ ] **TC-009**: 존재하지 않는 템플릿 변수 사용 시 예외 발생
- [ ] **TC-010**: 템플릿 수정 성공 테스트
- [ ] **TC-011**: 템플릿 수정 시 기존 관계 삭제 후 새 관계 생성 검증
- [ ] **TC-012**: 존재하지 않는 템플릿 수정 시 예외 발생
- [ ] **TC-013**: 템플릿 삭제 성공 테스트
- [ ] **TC-014**: 존재하지 않는 템플릿 삭제 시 예외 발생
- [ ] **TC-015**: 템플릿 전체 목록 조회 테스트

### SmsFactory 단위 테스트
- [ ] **TC-016**: SMS 리스트 생성 성공 테스트
- [ ] **TC-017**: 템플릿 변수 바인딩 검증
- [ ] **TC-018**: SMS 필터링 처리 검증
- [ ] **TC-019**: SmsResult 설정 검증

### 도메인 엔티티 테스트
- [ ] **TC-020**: SmsTemplate 생성 메서드 테스트
- [ ] **TC-021**: SmsTemplate 변수 관계 추가 테스트
- [ ] **TC-022**: SmsTemplate 업데이트 메서드 테스트
- [ ] **TC-023**: SmsTemplate 관계 삭제 테스트
- [ ] **TC-024**: Sms 빌더 패턴 테스트

### API 통합 테스트
- [ ] **TC-025**: SMS 발송 API 통합 테스트
- [ ] **TC-026**: SMS 발송목록 조회 API 통합 테스트
- [ ] **TC-027**: SMS 템플릿 생성 API 통합 테스트
- [ ] **TC-028**: SMS 템플릿 조회 API 통합 테스트

## 4. **테스트 선택 및 구현(더 이상 추가할 테스트가 없을 때 까지)**
